# 作業再開

## 🎯 このコマンドの目的
前回の作業を終了した後、新しいチャット/セッションで作業を再開する

## 📋 前提条件
- [ ] 前回の作業でGitHubにプッシュ済み
- [ ] プロジェクトディレクトリにいる

## 🚀 実行手順

### ステップ1: プロジェクトディレクトリに移動

```bash
# プロジェクトディレクトリに移動
cd /Users/a-aoki/indivisual/youtube-ai

# 現在のディレクトリを確認
pwd
```

---

### ステップ2: Gitの状態を確認

```bash
# 現在のブランチを確認
git branch --show-current

# 未コミットの変更がないか確認
git status

# リモートの状態を確認
git fetch origin

# ローカルとリモートの差分を確認
git status -sb
```

**出力例:**
```
## develop...origin/develop
nothing to commit, working tree clean
```

---

### ステップ3: 最新の変更を取得

```bash
# 現在のブランチを最新にする
git pull origin $(git branch --show-current)

# または、全ブランチの情報を更新
git fetch --all
```

---

### ステップ4: ブランチ管理表で進捗を確認

```bash
# ブランチ管理表を表示
cat .cursor/commands/ブランチ管理表.md
```

**確認事項:**
- ✅ どのステップまで完了しているか
- 🔄 現在作業中のステップ
- ⏳ 次に実装すべきステップ

---

### ステップ5: 作業の続行パターンを選択

以下のいずれかを選択してください:

#### パターンA: 新しいステップを開始する

前回のステップが完了しており、新しいステップを開始する場合

```bash
# developブランチに切り替え
git checkout develop

# 最新の状態に更新
git pull origin develop

# 次のコマンドに進む
# → 02-新しいステップの実装開始.md を参照
```

#### パターンB: 前回の途中から続ける

前回の作業が完了していない場合

```bash
# 作業中のfeatureブランチを確認
git branch

# 作業中のfeatureブランチに切り替え
git checkout feature/step-04-script-generation

# 最新の状態に更新
git pull origin feature/step-04-script-generation

# 実装を続ける
```

#### パターンC: 前回の作業を見直す

前回何をしたか確認したい場合

```bash
# 最近のコミット履歴を確認
git log --oneline -10 --graph

# 最後のコミットの詳細を確認
git show HEAD

# 特定のファイルの変更履歴を確認
git log -p main.py
```

---

### ステップ6: AIアシスタントに状況を説明

**新しいチャットでAIに質問する例:**

```
こんにちは。YouTube AI Podcastプロジェクトの続きを実装したいです。

現在の状況:
- ブランチ: develop
- 完了: ステップ1-3
- 次のタスク: ステップ4の台本生成

.cursor/rules/ を参照して、次に実装すべきことを教えてください。
```

**AIの回答例:**
```
承知しました。ブランチ管理表とルールを確認しました。

次のステップ:
1. feature/step-04-script-generation ブランチを作成
2. modules/claude_client.py に generate_dialogue_script() を実装
3. main.py に step_04_generate_script() を追加

必須メソッド一覧.mdc を参照して実装を開始します。
```

---

### ステップ7: 環境の確認（初回のみ）

新しいマシンやセッションの場合、環境を確認:

```bash
# Python環境を確認
python --version

# 仮想環境がある場合はアクティベート
source venv/bin/activate  # macOS/Linux
# または
.\venv\Scripts\activate  # Windows

# 依存関係を確認
pip list | grep anthropic
pip list | grep moviepy

# 必要に応じて再インストール
pip install -r requirements.txt
```

---

### ステップ8: .envファイルの確認

```bash
# .envファイルが存在するか確認
ls -la .env

# 環境変数が設定されているか確認（値は表示しない）
grep -E "^[A-Z_]+" .env | cut -d= -f1

# 必要に応じて.envを作成
# cp .env.example .env
# vim .env  # 実際の値を設定
```

---

### ステップ9: 静的ファイルの確認

```bash
# 必要なファイルが存在するか確認
ls -la assets/credentials/google-credentials.json
ls -la assets/background.png
ls -la assets/fonts/NotoSansJP-Regular.ttf

# ディレクトリ構造を確認
tree -L 2 -I '__pycache__|*.pyc|.git'
```

---

## ✅ 完了確認

以下を確認してください:

```bash
# チェックリスト
echo "✅ Gitの状態: $(git status --short | wc -l) 未コミットファイル"
echo "✅ 現在のブランチ: $(git branch --show-current)"
echo "✅ Python環境: $(python --version)"
echo "✅ .env: $(test -f .env && echo '存在する' || echo '⚠️ 作成が必要')"
echo "✅ 認証情報: $(test -f assets/credentials/google-credentials.json && echo '存在する' || echo '⚠️ 配置が必要')"
```

---

## 🎯 次のステップ

### 新しいステップを開始する場合
→ `02-新しいステップの実装開始.md`

### 前回の続きを実装する場合
→ 実装を続け、完了したら `03-実装完了とマージ.md`

### 状況を確認したい場合
→ `ブランチ管理表.md` を確認

---

## 🆘 トラブルシューティング

### .envファイルがない

```bash
# .env.exampleをコピー（存在しない場合）
echo "ANTHROPIC_API_KEY=your_key_here" > .env
echo "GOOGLE_SHEETS_ID=your_id_here" >> .env
# ... 必要な環境変数を追加

# エディタで編集
vim .env
```

### 認証情報ファイルがない

```bash
# Google認証情報をダウンロードして配置
# 1. Google Cloud Consoleで認証情報をダウンロード
# 2. ファイルを配置
cp ~/Downloads/credentials.json assets/credentials/google-credentials.json
```

### ブランチがおかしくなった

```bash
# ローカルの変更を破棄してリモートと同期
git fetch origin
git reset --hard origin/develop

# ⚠️ 注意: 未コミットの変更は失われます
```

### 依存関係のエラー

```bash
# 依存関係を再インストール
pip install --upgrade -r requirements.txt

# 特定のパッケージを再インストール
pip install --upgrade anthropic
```

### Gitの認証エラー

```bash
# Personal Access Tokenを再設定
git config --global credential.helper store
git pull origin develop
# Username と Personal Access Token を入力

# または、SSH接続に切り替え
git remote set-url origin git@github.com:your-username/youtube-ai-podcast.git
```

---

## 💡 作業再開のベストプラクティス

### 毎回実行すること
1. `git pull` でリモートの最新を取得
2. `ブランチ管理表.md` で進捗を確認
3. AIに現在の状況を説明

### 長期間空いた場合
1. 依存関係を更新 (`pip install -U -r requirements.txt`)
2. ドキュメントを再確認
3. 前回のコミット履歴を確認
4. 必要に応じてテスト実行

### チーム開発の場合
1. 他のメンバーの変更を確認
2. コンフリクトの可能性をチェック
3. ブランチ管理表を更新

---

## 📝 作業再開チェックリスト

```bash
# 以下を順に実行してチェック

# 1. ディレクトリ確認
pwd | grep youtube-ai && echo "✅ 正しいディレクトリ" || echo "❌ ディレクトリ移動が必要"

# 2. Git状態確認
git status --short && echo "✅ Gitリポジトリ" || echo "❌ Git初期化が必要"

# 3. ブランチ確認
git branch --show-current | grep -E "develop|feature" && echo "✅ 適切なブランチ" || echo "⚠️ ブランチ確認が必要"

# 4. 最新状態確認
git fetch origin && git status -sb | grep "up to date" && echo "✅ 最新状態" || echo "⚠️ git pull が必要"

# 5. 環境変数確認
test -f .env && echo "✅ .env存在" || echo "❌ .env作成が必要"

# 6. 依存関係確認
python -c "import anthropic; import moviepy; print('✅ 依存関係OK')" 2>/dev/null || echo "❌ pip install が必要"

# 7. 静的ファイル確認
test -f assets/credentials/google-credentials.json && echo "✅ 認証情報OK" || echo "⚠️ 認証情報配置が必要"

echo ""
echo "🎯 準備完了！次のステップに進んでください。"
```

---

## 🔄 Quick Start（上級者向け）

```bash
# ワンライナーで状況確認
cd /Users/a-aoki/indivisual/youtube-ai && \
git fetch origin && \
echo "📊 現在のブランチ: $(git branch --show-current)" && \
echo "📝 ステータス: $(git status --short | wc -l)ファイル変更" && \
cat .cursor/commands/ブランチ管理表.md | grep -E "⏳|🔄" && \
echo "" && \
echo "✅ 準備完了！AIに状況を説明してください。"
```

