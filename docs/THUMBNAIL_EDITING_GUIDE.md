# サムネイル編集ガイド

動画生成後にサムネイルのテキストを手動で編集し、再生成する方法を説明します。

## 📋 概要

動画の自動生成では、Claude APIがサムネイル用のキャッチコピーを自動生成します。
しかし、より良い表現に変更したい場合や、クリック率を最適化したい場合は、
サムネイルだけを手動で編集して再生成できます。

## 🎯 使用シーン

- ✅ 自動生成されたキャッチコピーが気に入らない
- ✅ より分かりやすい表現に変更したい  
- ✅ 数字や表現を調整してクリック率を上げたい
- ✅ A/Bテストで複数バージョンを作成したい

## 📁 ファイル構造

動画生成が完了すると、以下のファイルが `output/` ディレクトリに生成されます：

```
output/
├── thumbnail_20251003_120000.png        # サムネイル画像
├── thumbnail_20251003_120000.json       # サムネイル設定（編集可能）
└── metadata_thumbnail_20251003_120000.json  # 全メタデータ
```

## 🔧 サムネイル再生成の手順

### 方法1: JSONファイルを編集して再生成（推奨）

#### ステップ1: サムネイル設定JSONを開く

```bash
# エディタでJSONファイルを開く
code output/thumbnail_20251003_120000.json

# または
nano output/thumbnail_20251003_120000.json
```

#### ステップ2: テキストを編集

JSONファイルの内容例：
```json
{
  "text": "AI開発で月収1500万円！8ヶ月の奇跡",
  "title": "【衝撃】個人開発者がAIツールで月収10万ドル達成！",
  "created_at": "20251003_120000",
  "thumbnail_path": "output/thumbnail_20251003_120000.png",
  "background_path": "assets/images/background.png",
  "editable": true
}
```

**`text`フィールドを編集:**
```json
{
  "text": "月収1500万円の秘密公開",
  ...
}
```

**重要:**
- テキストは16文字以内を推奨（1行8文字 × 2行）
- 句読点（！、？）は文字数にカウントされません
- 改行は自動的に処理されます

#### ステップ3: 再生成スクリプトを実行

```bash
# 仮想環境をアクティベート
source venv/bin/activate

# 再生成スクリプトを実行
python regenerate_thumbnail.py
```

#### ステップ4: サムネイルを選択

```
利用可能なサムネイル設定:
--------------------------------------------------------------------------------
1. thumbnail_20251003_120000.json
   作成: 20251003_120000
   テキスト: AI開発で月収1500万円！8ヶ月の奇跡...

番号を選択（Enterで最新、qでキャンセル）: 1
```

**選択肢:**
- `Enter`: 最新のサムネイルを選択
- `1-10`: 番号でサムネイルを選択
- `q`: キャンセル

#### ステップ5: テキストを確認・編集

```
現在のサムネイルテキスト:
  「月収1500万円の秘密公開」

このテキストでサムネイルを再生成しますか？
  y: そのまま再生成
  e: テキストを編集して再生成
  n: キャンセル

選択 (y/e/n): e

新しいテキストを入力: AI副業で月1500万
```

#### ステップ6: サムネイルが再生成されます

```
✅ サムネイル再生成完了！
   output/thumbnail_20251003_120030.png

💡 サムネイルを確認:
   open output/thumbnail_20251003_120030.png
```

---

### 方法2: 直接JSONファイルを指定して再生成

特定のサムネイルJSONファイルを直接指定できます：

```bash
python regenerate_thumbnail.py output/thumbnail_20251003_120000.json
```

---

## 📝 サムネイルテキストの推奨事項

### ✅ 良い例

| テキスト | 理由 |
|---------|------|
| `月収1500万円の秘密` | 数字が具体的、短くて読みやすい |
| `AI開発8ヶ月で成功` | 期間と結果が明確 |
| `個人開発者驚愕の収益` | インパクトがある |

### ❌ 避けるべき例

| テキスト | 理由 |
|---------|------|
| `個人開発者がAIツールを使って成功した話` | 長すぎる（2行に収まらない） |
| `成功事例` | 抽象的すぎる |
| `詳しくはこちら` | 具体性がない |

### 💡 ポイント

1. **数字を入れる**: 「8ヶ月」「月収1500万円」など
2. **簡潔に**: 16文字以内（1行8文字 × 2行）
3. **インパクト**: 「驚愕」「衝撃」「秘密」などのパワーワード
4. **具体性**: 何についての動画か一目で分かる

---

## 🔄 完全自動化フローでの使用

### Render Cron実行での運用

**基本フロー（完全自動）:**
1. 毎朝6:00に自動実行
2. 情報収集 → 台本生成 → 音声生成 → 字幕生成 → 動画生成
3. Claude APIがメタデータ・サムネイルテキストを自動生成
4. サムネイル自動生成
5. Google Sheets に全て記録
6. Google Drive にアップロード
7. Slack通知

**手動編集フロー（必要な場合のみ）:**
1. Slack通知を受け取る
2. Google Sheetsでサムネイルテキストを確認
3. 変更が必要な場合のみ：
   ```bash
   # ローカルで実行
   python regenerate_thumbnail.py
   ```
4. 新しいサムネイルをGoogle Driveに手動アップロード
5. Google SheetsのURL列を更新

---

## 📊 Google Sheets の列構成

| 列 | 項目 | 説明 |
|----|------|------|
| A | 実行日時 | YYYY-MM-DD HH:MM:SS |
| B | タイトル | 動画タイトル（70文字以内） |
| C | 説明文 | 動画説明（最初の500文字） |
| D | タグ | カンマ区切り（15個以内） |
| E | サムネイルテキスト | キャッチコピー |
| F | コメント | 毒舌コメント |
| G | 動画パス | ローカルファイルパス |
| H | 音声パス | ローカルファイルパス |
| I | サムネイルパス | ローカルファイルパス |
| J | 処理時間 | 秒 |
| K | ステータス | 完了/エラー |
| L | 動画URL | Google Drive URL |
| M | 音声URL | Google Drive URL |
| N | サムネイルURL | Google Drive URL |

---

## 🛠️ トラブルシューティング

### Q: サムネイルが生成されない

**確認事項:**
- フォントファイルが存在するか: `assets/fonts/Noto_Sans_JP/static/NotoSansJP-Bold.ttf`
- 背景画像が存在するか: `assets/images/background.png`
- `output/` ディレクトリが存在するか

### Q: テキストが途切れる・見切れる

**対処法:**
- テキストを16文字以内に短縮する
- 句読点（！、？）を含めると自動で調整されます

### Q: JSONファイルが見つからない

**対処法:**
```bash
# output/ディレクトリ内のJSONファイルを確認
ls -lt output/thumbnail_*.json
```

---

## 📚 関連ドキュメント

- `README.md` - プロジェクト概要
- `QUICKSTART.md` - クイックスタートガイド
- `manuals/STEPS_REFERENCE.md` - 各ステップの詳細
- `IMPLEMENTATION_GUIDE.md` - 実装ガイド

---

## 💡 Tips

### バッチ処理

複数のサムネイルを一度に編集したい場合：

```bash
# 全てのサムネイルJSONを一覧表示
ls -t output/thumbnail_*.json

# 各JSONを編集
for json in output/thumbnail_*.json; do
    # テキストを確認
    cat $json | grep "text"
done
```

### バックアップ

重要なサムネイルはバックアップを取ることを推奨：

```bash
# サムネイルとJSONをバックアップ
cp output/thumbnail_20251003_120000.png backup/
cp output/thumbnail_20251003_120000.json backup/
```

---

**作成日**: 2025-10-03  
**最終更新**: 2025-10-03

